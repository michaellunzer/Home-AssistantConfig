#moon sensor
  - platform: moon
  
  
# Season Sensor
  - platform: season
    type: astronomical
  
# # international Space Station
#   - platform: iss
#     # show_on_map: True

# pollen sensor  
  - platform: pollen
    zip_code: !secret pollen_zip_code
    monitored_conditions:
    - allergy_average_forecasted
    - allergy_average_historical
    - allergy_index_today
    - allergy_index_tomorrow
    - allergy_index_yesterday
    - disease_average_forecasted

# Weather prediction
  - platform: yr
    name: weather
    monitored_conditions:
      - temperature
      - symbol
      - precipitation
      - windSpeed
      # - pressure
      # - windDirection
      - humidity
      - fog
      - cloudiness
      # - lowClouds
      # - mediumClouds
      # - highClouds
      # - dewpointTemperature
      
      
### Need to setup Darksky sensors first
### https://diyfuturism.com/index.php/2018/01/13/useful-sensor-wind-direction-home-assistant/

# # Convert the Wind Direction from degrees to cardinal
# - platform: template
#   sensors:
#     friendly_wind_direction:
#       friendly_name: 'Wind Direction'
#       value_template: >-
#         {%if states.sensor.dark_sky_wind_bearing.state | float<=11 %}N
#         {% elif states.sensor.dark_sky_wind_bearing.state | float>348 %}N
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=34 | float>11 %}NNE
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=56 | float>34 %}NE
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=79 | float>56 %}ENE
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=101 | float>79 %}E
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=124 | float>101 %}ESE
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=146 | float>124 %}SE
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=169 | float>146 %}SSE
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=191 | float>169 %}S
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=214 | float>191 %}SSW
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=236 | float>214 %}SW
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=259 | float>236 %}WSW
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=281 | float>259 %}W
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=304 | float>281 %}WNW
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=326 | float>304 %}NW
#         {% elif states.sensor.dark_sky_wind_bearing.state | float<=348 | float>326 %}NNW
#         {%- endif %}
      
# # iPhone Battery Sensor
#   - platform: template
#     sensors:
#       battery_iphone:
#         friendly_name: LunziPhone Battery
#         # "entity_id:" ensures that this sensor will only update when your device tracker does.
#         entity_id: device_tracker.iphone
#         unit_of_measurement: '%'
#         value_template: >-
#             {%- if states.device_tracker.iphone.attributes.battery %}
#                 {{ states.device_tracker.iphone.attributes.battery|round }}
#             {% else %}
#                 {{ states.sensor.battery_iphone.state }}
#             {%- endif %}
#         icon_template: >
#             {% set battery_level = states.sensor.battery_iphone.state|default(0)|int %}
#             {% set battery_round = (battery_level / 10) |int * 10 %}
#             {% if battery_round >= 100 %}
#               mdi:battery
#             {% elif battery_round > 0 %}
#               mdi:battery-{{ battery_round }}
#             {% else %}
#               mdi:battery-alert
#             {% endif %}


#### CPU Speed Sensor is throwing a lot of errors ####
# CPU Speed Sensor
#   - platform: cpuspeed
  
# LunzPi Supervisor Status
#not currently working for whatever reason
#   - platform: supervisord
#     url: http://lunzpi.local:9001/


# HaveIBeenPwned Sensor
  - platform: haveibeenpwned
    email: 
    - !secret email


# Version Sensor to add to System Group
  - platform: version
  
  
# Folder Sensor (monitors how much stuff is in the folder - in MB)
  - platform: folder
    folder: /config
#   - platform: folder
#     folder: /backup
#   - platform: folder
#     folder: /addons
#   - platform: folder
#     folder: /share
#   - platform: folder
#     folder: /mnt/backups
    
# File Sensor
#   - platform: filesize
#     file_paths:
#       - /config/home-assistant_v2.db

  
# System Monitor Sensor  
  - platform: systemmonitor
    resources:
    - type: disk_use_percent
      arg: /home/
    - type: memory_free
    - type: memory_use_percent
    - type: processor_use
    - type: last_boot
    - type: since_last_boot
    
### Not sure if this will work with proxmox to report the host system battery state
#   - platform: linux_battery
    
# Speed Test Sensor
#   - platform: speedtest
#     minute: 30
#     hour:
#     - 4
#     monitored_conditions:
#       - ping
#       - download
#       - upload
#   - platform: uptime
#     name: "Time Online"
#     unit_of_measurement: hours
    
# LastFM
#   - platform: lastfm
#     api_key: !secret lastfm_api_key
#     users:
#       - michaellunzer
      
# AirVisual
  - platform: airvisual
    api_key: !secret airvisual_api_key
    monitored_conditions:
      - us
    latitude: !secret homeassistant_latitude
    longitude: !secret homeassistant_longitude
    radius: 500
    show_on_map: false

#DuckDNS Certificate Expirary
  - platform: cert_expiry
    host: !secret certificate_expiry_url
    name: "Home Assistant DuckDNS SSL Certificate"
    
# BRUH MultiSensor
# https://github.com/bruhautomation/ESP-MQTT-JSON-Multisensor

  - platform: mqtt  
    state_topic: "bruh/sensornode1"  
    name: "SN1 Humidity"  
    unit_of_measurement: "%"  
    value_template: '{{ value_json.humidity | round(1) }}'  
  
  - platform: mqtt  
    state_topic: "bruh/sensornode1"  
    name: "SN1 LDR"
    ##This sensor is not calibrated to actual LUX. Rather, this a map of the input voltage ranging from 0 - 1023.
    unit_of_measurement: "LUX"  
    value_template: '{{ value_json.ldr }}'  
  
  - platform: mqtt  
    state_topic: "bruh/sensornode1"  
    name: "SN1 PIR"  
    value_template: '{{ value_json.motion }}'  
  
  - platform: mqtt  
    state_topic: "bruh/sensornode1"  
    name: "SN1 Temperature"  
    unit_of_measurement: "°F"  
    value_template: '{{ value_json.temperature | round(1) }}'  
    
  - platform: mqtt
    state_topic: "bruh/sensornode1"
    name: "SN1 Real Feel"
    unit_of_measurement: "°F"
    value_template: '{{ value_json.heatIndex | round(1) }}'
    

### Room-Assistant Bluetooth LE Presence Detection running on Raspberry Pi Zero W and sending updates over MQTT

  - platform: mqtt_room
    device_id: e51c8f2fd74b
    away_timeout: 30
    name: 'Tile Keys R-A_BT'
    
  - platform: mqtt_room
    device_id: 760e4e3e2f66
    away_timeout: 30
    name: 'Pebble 2 Watch R-A_BT'
    
  - platform: mqtt_room
    device_id: 4a896f874cc0
    away_timeout: 30
    name: 'Pebble Time Round Watch R-A_BT'

  - platform: mqtt_room
    device_id: d6234b09ace6
    away_timeout: 30
    name: 'Playbulb Bathroom Light R-A_BT'
    
    
    ######## Volume Knob ########
    
  - platform: mqtt
    state_topic: "rotary/volume/state"
    name: "Volume Knob"
    retain: true
