#moon sensor
  - platform: moon
  
# # international Space Station
#   - platform: iss
#     # show_on_map: True

# pollen sensor  
  - platform: pollen
    zip_code: !secret pollen_zip_code
    monitored_conditions:
    - allergy_average_forecasted
    - allergy_average_historical
    - allergy_index_today
    - allergy_index_tomorrow
    - allergy_index_yesterday
    - disease_average_forecasted

# Weather prediction
  - platform: yr
    name: weather
    monitored_conditions:
      - temperature
      - symbol
      - precipitation
      # - windSpeed
      # - pressure
      # - windDirection
      - humidity
      # - fog
      - cloudiness
      # - lowClouds
      # - mediumClouds
      # - highClouds
      # - dewpointTemperature
      
# # iPhone Battery Sensor
#   - platform: template
#     sensors:
#       battery_iphone:
#         friendly_name: LunziPhone Battery
#         # "entity_id:" ensures that this sensor will only update when your device tracker does.
#         entity_id: device_tracker.iphone
#         unit_of_measurement: '%'
#         value_template: >-
#             {%- if states.device_tracker.iphone.attributes.battery %}
#                 {{ states.device_tracker.iphone.attributes.battery|round }}
#             {% else %}
#                 {{ states.sensor.battery_iphone.state }}
#             {%- endif %}
#         icon_template: >
#             {% set battery_level = states.sensor.battery_iphone.state|default(0)|int %}
#             {% set battery_round = (battery_level / 10) |int * 10 %}
#             {% if battery_round >= 100 %}
#               mdi:battery
#             {% elif battery_round > 0 %}
#               mdi:battery-{{ battery_round }}
#             {% else %}
#               mdi:battery-alert
#             {% endif %}

# CPU Speed Sensor
  - platform: cpuspeed
  
# LunzPi Supervisor Status
#not currently working for whatever reason
#   - platform: supervisord
#     url: http://lunzpi.local:9001/
  
# System Monitor Sensor  
  - platform: systemmonitor
    resources:
    - type: disk_use_percent
      arg: /home/
    - type: memory_free
    - type: memory_use_percent
    - type: processor_use
    - type: last_boot
    - type: since_last_boot
    
# Speed Test Sensor
  - platform: speedtest
    monitored_conditions:
      - ping
      - download
      - upload
  - platform: uptime
    name: "Time Online"
    unit_of_measurement: hours
    
# LastFM
  - platform: lastfm
    api_key: !secret lastfm_api_key
    users:
      - michaellunzer
      
# AirVisual
  - platform: airvisual
    api_key: !secret airvisual_api_key
    monitored_conditions:
      - us
    latitude: !secret homeassistant_latitude
    longitude: !secret homeassistant_longitude
    radius: 500
    show_on_map: false

#DuckDNS Certificate Expirary
  - platform: cert_expiry
    host: !secret certificate_expiry_url
    name: "Home Assistant DuckDNS SSL Certificate"
    
# BRUH MultiSensor
# https://github.com/bruhautomation/ESP-MQTT-JSON-Multisensor

  - platform: mqtt  
    state_topic: "bruh/sensornode1"  
    name: "SN1 Humidity"  
    unit_of_measurement: "%"  
    value_template: '{{ value_json.humidity | round(1) }}'  
  
  - platform: mqtt  
    state_topic: "bruh/sensornode1"  
    name: "SN1 LDR"
    ##This sensor is not calibrated to actual LUX. Rather, this a map of the input voltage ranging from 0 - 1023.
    unit_of_measurement: "LUX"  
    value_template: '{{ value_json.ldr }}'  
  
  - platform: mqtt  
    state_topic: "bruh/sensornode1"  
    name: "SN1 PIR"  
    value_template: '{{ value_json.motion }}'  
  
  - platform: mqtt  
    state_topic: "bruh/sensornode1"  
    name: "SN1 Temperature"  
    unit_of_measurement: "°F"  
    value_template: '{{ value_json.temperature | round(1) }}'  
    
  - platform: mqtt
    state_topic: "bruh/sensornode1"
    name: "SN1 Real Feel"
    unit_of_measurement: "°F"
    value_template: '{{ value_json.heatIndex | round(1) }}'